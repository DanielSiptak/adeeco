package cz.cuni.mff.d3s.deeco.knowledge.jgroups;

import java.io.Serializable;

/**
 * This object is holding real value in the hash map
 * It is used for counting number of writes 
 * 
 * It is needed for merging of clusters where values with higher values are used. 
 * 
 * @author Daniel Sipt√°k
 *
 */

public class MergingValueHolder implements Comparable<MergingValueHolder>{

	private Serializable obj;
	private int count = 0;
	
	public MergingValueHolder(Serializable value) {
		obj = value;
		count = 0;
	}
	/**
	 * Returns holed object 
	 * @return
	 */
	public Serializable get(){
		return obj;
	}

	/**
	 * Change stored value and increments number of writes
	 * @param value
	 */
	public void put(Serializable value){
		count++;
		obj = value;
	}

	/**
	 * Compares number of writes for the {@link MergingValueHolder} object
	 *  @return 0 if number of writes is equal
	 *  		>0 if object has more writes that another
	 *  		<0 it object has less writes that another
	 */
	@Override
	public int compareTo(MergingValueHolder another) {
		return compare(this, another);
	}

	/**
	 * Compares number of writes for the {@link MergingValueHolder} objects
	 *  @return 0 if number of writes is equal
	 *  		>0 if first has more writes that second
	 *  		<0 it first has less writes that second
	 */
	public static int compare(MergingValueHolder first,MergingValueHolder second){
		return first.count - second.count;	
	}
	
}
